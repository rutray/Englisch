<!DOCTYPE html>
<html lang="de">
<!-- Quiz-Sprache: Deutsch (German) -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Englisch Vokabeltest</title>
    <style>
        body {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            margin: 40px;
        }

        .quiz-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 300px;
        }

        .question {
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1em;
            color: #111;
        }

        input {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
            color:#111
        }

        .error {
            border: 2px solid red;
            outline: none;
        }

        #result {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.2em;
        }

        button {
            padding: 20px 20px;
            border-radius: 5px;
            margin: 20px auto 0;
            width: 60%;
            background-color: #214322;
            color: white;
            font-size: medium;
            border: none;
            cursor: pointer;
        }
        #btn-answer {
            background-color: #627b63;
            width: 30%;
        }

        @media only screen and (max-width: 600px) {
            button {
                width: 80%;
            }
            #btn-answer {
                width: 50%;
            }
            
        }
        .solution-text {
            font-size: 0.9em;
            color: #807373;
            font-style: italic;
            margin-top: 5px;
        }
    </style>
</head>

<body>

    <h2>Vokabeltest</h2>
    <p>Übersetze ins Englische:</p>

    <div id="quiz-fields" class="quiz-container">
    </div>


    <button type="button" onclick="checkAnswers()">Überprüfen</button>
    <div id="result"></div>
    <button type="button" onclick="showAnswers()" id="btn-answer">Lösungen anzeigen</button>


    <script>
        // Das Dictionary mit den Vokabeln (Deutsch: [Englisch1, Englisch2])

        const vocabulary = {

            "klettern": ["to climb"],

            "hüpfen": ["to jump"],

            "verlassen/weggehen": ["to leave"],

            "Spiegel": ["mirror"],

            "aufsetzen/anziehen": ["to put on", "to wear"],

            "weg": ["away"],

            "Geh weg!": ["Go away!"],

            "beste": ["best"],

            "DetektivIn": ["detective"],

            "Hilf mir!": ["help me!"],

            "suchen": ["to search", "to look for"],

            "alt": ["old"],

            "aufheben": ["to pick up"],

            "hinausrennen (aus)": ["to run out (of)"],

            "die Straße hinunterlaufen": ["to run down the street"],

            "finden": ["to find"],

            "ziehen": ["to pull"],

            "fangen/erwischen/festnehmen": ["to catch"],

            "klug/schlau": ["clever", "smart"],

            "(zu etwas) hinkommen": ["to come to (something)"],

            "leben/wohnen": ["to live"],

            "Pfeife": ["pipe"],

            "rauchen": ["to smoke"],

            "lösen": ["to solve"],

            "geige": ["violin"],

            "warten": ["to wait"],

            "beobachten/zuschauen": ["to observe", "to watch"],

            "Straße": ["street"],

            "aufstehen": ["to get up"],

            "werden": ["to become"],

            "Erzähle weiter!": ["Go on!"],

            "Gut gemacht!": ["Well done!"],

            "Aber es stimmt!": ["But it's true!"],

            "viel(-e) / jede Menge": ["a lot of / lots of"],

            "(an)rufen": ["to call"],

            "Komm jetzt!/Mach schon!": ["Come on!"]

        };


        // 1. Felder beim Laden der Seite erstellen
        const container = document.getElementById('quiz-fields');

        for (const [german, answers] of Object.entries(vocabulary)) {
            const div = document.createElement('div');
            div.className = 'question';
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'quiz-input';
            input.dataset.correct = JSON.stringify(answers);
            div.appendChild(document.createTextNode(german + ': '));
            div.appendChild(input);
            container.appendChild(div);
        }

        // 2. Prüf-Logik
        function normalizeAnswer(answer) {
            return answer.trim().toLowerCase().replace(/[!?.]/g, '');
        }

        function checkAnswers() {
            const inputs = document.querySelectorAll('.quiz-input');
            let correctCount = 0;

            inputs.forEach(input => {
                const userAnswer = normalizeAnswer(input.value);
                const allowedAnswers = JSON.parse(input.getAttribute('data-correct'));

                const isCorrect = allowedAnswers.some(answer =>
                    normalizeAnswer(answer) === userAnswer
                );

                if (isCorrect) {
                    correctCount++;
                    input.classList.remove('error');
                } else {
                    input.classList.add('error');
                }
            });

            document.getElementById('result').innerText =
                `Ergebnis: ${correctCount} von ${Object.keys(vocabulary).length} richtig.`;
        }

        function showAnswers() {
            const inputs = document.querySelectorAll('.quiz-input');

            inputs.forEach(input => {
                // Die hinterlegten Antworten aus dem Attribut holen
                const allowedAnswers = JSON.parse(input.getAttribute('data-correct'));

                // Prüfen, ob bereits eine Lösung angezeigt wird, um Dopplungen zu vermeiden
                let solutionDisplay = input.parentElement.querySelector('.solution-text');
                const btnText = document.getElementById('btn-answer');

                if (!solutionDisplay) {
                    solutionDisplay = document.createElement('div');
                    solutionDisplay.className = 'solution-text';
                    // Wir zeigen die erste Antwortmöglichkeit aus dem Array
                    solutionDisplay.innerText = allowedAnswers[0];
                    input.parentElement.appendChild(solutionDisplay);
                    btnText.innerText = 'Lösungen verbergen';
                } else {
                    // Wenn die Lösung bereits angezeigt wird, entfernen wir sie
                    solutionDisplay.remove();
                    btnText.innerText = 'Lösungen anzeigen';
                }
            });
        }
    </script>
</body>

</html>